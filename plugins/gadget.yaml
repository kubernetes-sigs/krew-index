apiVersion: krew.googlecontainertools.github.com/v1alpha2
kind: Plugin
metadata:
  name: gadget
spec:
  version: v0.4.0
  homepage: https://github.com/kinvolk/inspektor-gadget
  shortDescription: Gadgets for debugging and introspecting apps
  description: |
    Inspektor Gadget is a collection of tools (or gadgets) for developers of
    Kubernetes applications.

    Inspektor Gadget is deployed to each node as a privileged DaemonSet.
    It uses in-kernel BPF helper programs to monitor events mainly related to
    syscalls from userspace programs in a pod. The BPF programs are run by
    the kernel and gather the log data. Inspektor Gadget's userspace utilities
    fetch the log data from ring buffers and display it. What BPF programs are
    and how Inspektor Gadget uses them is briefly explained in the architecture
    document:
    https://github.com/kinvolk/inspektor-gadget/blob/main/docs/architecture.md
  caveats: |
    Inspektor Gadget needs to be deployed to each node:

    $ kubectl gadget deploy | kubectl apply -f -

    Read the documentation available at https://github.com/kinvolk/inspektor-gadget
    to get more information about the server side installation process.
  platforms:
  - selector:
      matchLabels:
        os: linux
        arch: amd64
    uri: https://github.com/kinvolk/inspektor-gadget/releases/download/v0.4.0/inspektor-gadget-linux-amd64.tar.gz
    sha256: 6bb91ff18f1233c865a18b52ebb03a944805e090bb587c263fbbb3247937e0c1
    bin: kubectl-gadget

  - selector:
      matchLabels:
        os: linux
        arch: arm64
    uri: https://github.com/kinvolk/inspektor-gadget/releases/download/v0.4.0/inspektor-gadget-linux-arm64.tar.gz
    sha256: 74d50b89d257347d0a33b31b4f50572c3436b5736929518266e944d465b5eaad
    bin: kubectl-gadget

  - selector:
      matchLabels:
        os: darwin
        arch: amd64
    uri: https://github.com/kinvolk/inspektor-gadget/releases/download/v0.4.0/inspektor-gadget-darwin-amd64.tar.gz
    sha256: 38e8139f0c9b37bc59f0fadc17b79f1fb61b0ed1960f9ab9b8e68984514caaff
    bin: kubectl-gadget

  - selector:
      matchLabels:
        os: darwin
        arch: arm64
    uri: https://github.com/kinvolk/inspektor-gadget/releases/download/v0.4.0/inspektor-gadget-darwin-arm64.tar.gz
    sha256: 8fd8ef67b840f3ea3687e1471036d62680582ab3d317948d48839cd0d115dae6
    bin: kubectl-gadget

  - selector:
      matchLabels:
        os: windows
        arch: amd64
    uri: https://github.com/kinvolk/inspektor-gadget/releases/download/v0.4.0/inspektor-gadget-windows-amd64.tar.gz
    sha256: 3cd048c59a900ac98b6cf9e4df613a774d3af95dca710b7822098d6af77c278b
    bin: kubectl-gadget
