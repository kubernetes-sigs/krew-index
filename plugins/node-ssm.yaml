apiVersion: krew.googlecontainertools.github.com/v1alpha2
kind: Plugin
metadata:
  name: node-ssm
spec:
  version: v0.0.6
  homepage: https://github.com/VioletCranberry/kubectl-node-ssm
  shortDescription: start aws ssm session to SSM managed EKS node
  description: |
    Start an SSM session with AWS SSM managed EKS node using
    local AWS CLI and ssm-plugin. EKS node name (private-dns-name)
    will be resolved to instance ID using AWS API and AWS profile
    with region parsed from current kubeconfig.
  caveats: |
      AWS SSM manager requires setup before you can connect to managed nodes.
      This plugin requires:
      * AWS CLI
      * session-manager-plugin 
  platforms:
  - selector:
      matchLabels:
        os: darwin
        arch: amd64
    uri: https://github.com/VioletCranberry/kubectl-node-ssm/releases/download/v0.0.6/kubectl-node_ssm-v0.0.6-darwin-amd64.tar.gz
    sha256: 2aba34c1f0f40e8a7d0b0eb9ebd81fb81a79e240a65e3c1af49258ca23845cae
    bin: node-ssm
    files:
      - from: LICENSE
        to: .
      - from: README.md
        to: .
      - from: ./kubectl-node_ssm
        to: node-ssm
  - selector:
      matchLabels:
        os: darwin
        arch: arm64
    uri: https://github.com/VioletCranberry/kubectl-node-ssm/releases/download/v0.0.6/kubectl-node_ssm-v0.0.6-darwin-arm64.tar.gz
    sha256: 25b64e3f00fec4a66e0032bd744875a299203221b9c45c59c6002cf5a2936d80
    bin: node-ssm
    files:
      - from: LICENSE
        to: .
      - from: README.md
        to: .
      - from: ./kubectl-node_ssm
        to: node-ssm
  - selector:
      matchLabels:
        os: linux
        arch: amd64
    uri: https://github.com/VioletCranberry/kubectl-node-ssm/releases/download/v0.0.6/kubectl-node_ssm-v0.0.6-linux-amd64.tar.gz
    sha256: 16d9971e2e6c1deb3967782dc6fb72762a77170eddb848fa4aebc65bad13bf94
    bin: node-ssm
    files:
      - from: LICENSE
        to: .
      - from: README.md
        to: .
      - from: ./kubectl-node_ssm
        to: node-ssm
  - selector:
      matchLabels:
        os: linux
        arch: arm64
    uri: https://github.com/VioletCranberry/kubectl-node-ssm/releases/download/v0.0.6/kubectl-node_ssm-v0.0.6-linux-arm64.tar.gz
    sha256: 60e2601d5be2fd91235bdca985ba5727d57d2a4f83d802c2e9e3e4b9b622e36c
    bin: node-ssm
    files:
      - from: LICENSE
        to: .
      - from: README.md
        to: .
      - from: ./kubectl-node_ssm
        to: node-ssm
  - selector:
      matchLabels:
        os: windows
        arch: amd64
    uri: https://github.com/VioletCranberry/kubectl-node-ssm/releases/download/v0.0.6/kubectl-node_ssm-v0.0.6-windows-amd64.zip
    sha256: 3f43aba7e1757ed0599a83d868b6b866d1cae84d61d2d41c6dd02d2dedb6ed2c
    bin: node-ssm.exe
    files:
      - from: LICENSE
        to: .
      - from: README.md
        to: .
      - from: ./kubectl-node_ssm.exe
        to: node-ssm.exe
  - selector:
      matchLabels:
        os: windows
        arch: arm64
    uri: https://github.com/VioletCranberry/kubectl-node-ssm/releases/download/v0.0.6/kubectl-node_ssm-v0.0.6-windows-arm64.zip
    sha256: 3e1fab8085fac6acadd79a1687863c47e534a96a96dd32aaa5e7e37fa48efdf3
    bin: node-ssm.exe
    files:
      - from: LICENSE
        to: .
      - from: README.md
        to: .
      - from: ./kubectl-node_ssm.exe
        to: node-ssm.exe
