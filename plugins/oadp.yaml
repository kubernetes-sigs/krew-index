apiVersion: krew.googlecontainertools.github.com/v1alpha2
kind: Plugin
metadata:
  name: oadp
spec:
  version: v0.3.2
  homepage: https://github.com/migtools/oadp-cli
  shortDescription: CLI for OpenShift APIs for Data Protection (OADP) operator
  description: |
    kubectl-oadp is a kubectl plugin for managing OpenShift API for Data Protection (OADP) backup and restore operations.
    
    It provides both admin and non-admin commands:
    - Admin commands: Full OADP/Velero backup and restore operations
    - Non-admin commands: Namespace-scoped backup operations with automatic namespace detection
    
    The plugin automatically detects the appropriate namespace from your current kubectl context
    for non-admin operations, following the principle of least privilege.
    
    Features:
    - Create and manage OADP backups
    - View backup status and logs  
    - Delete backups
    - Support for both cluster-admin and namespace-scoped operations
  caveats: |
    This plugin requires:
    - OADP operator to be installed in the cluster
    - Ensure the velero namespace (where the server is running) is correct: Run `kubectl oadp client config set namespace=<namespace>` to set the velero namespace
    - Appropriate RBAC permissions for the operations you want to perform
    - Read more documentation at: https://github.com/migtools/oadp-cli
  platforms:
  - selector:
      matchLabels:
        os: linux
        arch: amd64
    uri: https://github.com/migtools/oadp-cli/releases/download/v0.3.2/kubectl-oadp_v0.3.2_linux_amd64.tar.gz
    sha256: 060a63889ddee194ba4c077b80ebb0230bb463213c61a8a18c7a3eec805e5119
    files:
    - from: kubectl-oadp
      to: .
    - from: LICENSE
      to: .
    bin: kubectl-oadp
  - selector:
      matchLabels:
        os: linux
        arch: arm64
    uri: https://github.com/migtools/oadp-cli/releases/download/v0.3.2/kubectl-oadp_v0.3.2_linux_arm64.tar.gz
    sha256: 61c621804d8e278faf210b64c69b48f4745bc4c53ec466462a5a094c6915b8ff
    files:
    - from: kubectl-oadp
      to: .
    - from: LICENSE
      to: .
    bin: kubectl-oadp
  - selector:
      matchLabels:
        os: darwin
        arch: amd64
    uri: https://github.com/migtools/oadp-cli/releases/download/v0.3.2/kubectl-oadp_v0.3.2_darwin_amd64.tar.gz
    sha256: 7096c57782647432214493b9c8625b17f89a8646883839200836d45a7e7605cc
    files:
    - from: kubectl-oadp
      to: .
    - from: LICENSE
      to: .
    bin: kubectl-oadp
  - selector:
      matchLabels:
        os: darwin
        arch: arm64
    uri: https://github.com/migtools/oadp-cli/releases/download/v0.3.2/kubectl-oadp_v0.3.2_darwin_arm64.tar.gz
    sha256: 94a71e6b2fdec6b263915a909b6966c6ea530b1948eae5a654b1a17db4a8b3df
    files:
    - from: kubectl-oadp
      to: .
    - from: LICENSE
      to: .
    bin: kubectl-oadp
  - selector:
      matchLabels:
        os: windows
        arch: amd64
    uri: https://github.com/migtools/oadp-cli/releases/download/v0.3.2/kubectl-oadp_v0.3.2_windows_amd64.tar.gz
    sha256: 4011f77205f4faf8b2932da9b4c466fb6f39920fb36ff10425203374adfe2104
    files:
    - from: kubectl-oadp.exe
      to: .
    - from: LICENSE
      to: .
    bin: kubectl-oadp.exe
  - selector:
      matchLabels:
        os: windows
        arch: arm64
    uri: https://github.com/migtools/oadp-cli/releases/download/v0.3.2/kubectl-oadp_v0.3.2_windows_arm64.tar.gz
    sha256: 6a176f4b5bc7e0e80a2b780d97f08261389de13edde029d6ae8b13723833ad67
    files:
    - from: kubectl-oadp.exe
      to: .
    - from: LICENSE
      to: .
    bin: kubectl-oadp.exe

