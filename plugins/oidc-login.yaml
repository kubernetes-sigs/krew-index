apiVersion: krew.googlecontainertools.github.com/v1alpha2
kind: Plugin
metadata:
  name: oidc-login
spec:
  homepage: https://github.com/int128/kubelogin
  shortDescription: Log in to the OpenID Connect provider
  description: |
    This is a kubectl plugin for Kubernetes OpenID Connect (OIDC) authentication.

    ## Credential plugin mode
    kubectl executes oidc-login before calling the Kubernetes APIs.
    oidc-login automatically opens the browser and you can log in to the provider.
    After authentication, kubectl gets the token from oidc-login and you can access the cluster.
    See https://github.com/int128/kubelogin#credential-plugin-mode for more.

    ## Standalone mode
    Run `kubectl oidc-login`.
    It automatically opens the browser and you can log in to the provider.
    After authentication, it writes the token to the kubeconfig and you can access the cluster.
    See https://github.com/int128/kubelogin#standalone-mode for more.

  caveats: |
    You need to setup the OIDC provider, Kubernetes API server, role binding and kubeconfig.
  version: v1.32.1
  platforms:
  - bin: kubelogin
    uri: https://github.com/int128/kubelogin/releases/download/v1.32.1/kubelogin_linux_amd64.zip
    sha256: 71fde8935bd2c43119e9a9f62bf0540c31799387b559aa9a08d93a123ad2b178
    selector:
      matchLabels:
        os: linux
        arch: amd64
  - bin: kubelogin
    uri: https://github.com/int128/kubelogin/releases/download/v1.32.1/kubelogin_linux_arm64.zip
    sha256: 0bbf5ab8109bbf6a366aaf6274d939f7065e9aca258edc97676a78036f4c1252
    selector:
      matchLabels:
        os: linux
        arch: arm64
  - bin: kubelogin
    uri: https://github.com/int128/kubelogin/releases/download/v1.32.1/kubelogin_linux_arm.zip
    sha256: 877afde617e4fb4197deb55921ea5472da1f0af1ee4bb4953503073747d54b3f
    selector:
      matchLabels:
        os: linux
        arch: arm
  - bin: kubelogin
    uri: https://github.com/int128/kubelogin/releases/download/v1.32.1/kubelogin_darwin_amd64.zip
    sha256: 5a10828c8f2c5457e7c2de930a1b58e34cda74068206f1d00eaff83488915292
    selector:
      matchLabels:
        os: darwin
        arch: amd64
  - bin: kubelogin
    uri: https://github.com/int128/kubelogin/releases/download/v1.32.1/kubelogin_darwin_arm64.zip
    sha256: 4ce9d19d23b97fe7218ab895e8149778d4f7f0620972eda737970760aa0fe6b0
    selector:
      matchLabels:
        os: darwin
        arch: arm64
  - bin: kubelogin.exe
    uri: https://github.com/int128/kubelogin/releases/download/v1.32.1/kubelogin_windows_amd64.zip
    sha256: f8a0ccdc33c32b9c610efddaf949c82796439762069609ac00eafc7b8931f06b
    selector:
      matchLabels:
        os: windows
        arch: amd64
  - bin: kubelogin.exe
    uri: https://github.com/int128/kubelogin/releases/download/v1.32.1/kubelogin_windows_arm64.zip
    sha256: b100438e3839b46a56a03af28267341389bc3d1241a0c033b8145cb393a0d513
    selector:
      matchLabels:
        os: windows
        arch: arm64