apiVersion: krew.googlecontainertools.github.com/v1alpha2
kind: Plugin
metadata:
  name: oidc-login
spec:
  homepage: https://github.com/int128/kubelogin
  shortDescription: Log in to the OpenID Connect provider
  description: |
    This is a kubectl plugin for Kubernetes OpenID Connect (OIDC) authentication.

    ## Credential plugin mode
    kubectl executes oidc-login before calling the Kubernetes APIs.
    oidc-login automatically opens the browser and you can log in to the provider.
    After authentication, kubectl gets the token from oidc-login and you can access the cluster.
    See https://github.com/int128/kubelogin#credential-plugin-mode for more.

    ## Standalone mode
    Run `kubectl oidc-login`.
    It automatically opens the browser and you can log in to the provider.
    After authentication, it writes the token to the kubeconfig and you can access the cluster.
    See https://github.com/int128/kubelogin#standalone-mode for more.

  caveats: |
    You need to setup the OIDC provider, Kubernetes API server, role binding and kubeconfig.
  version: v1.34.1
  platforms:
  - bin: kubelogin
    uri: https://github.com/int128/kubelogin/releases/download/v1.34.1/kubelogin_linux_amd64.zip
    sha256: 018226f75b7f5f3223e5d46df3af746a778315fa2ea10c422cd4ead086173c96
    selector:
      matchLabels:
        os: linux
        arch: amd64
  - bin: kubelogin
    uri: https://github.com/int128/kubelogin/releases/download/v1.34.1/kubelogin_linux_arm64.zip
    sha256: 06a2fee7e82b2676c5772a06e874947d5f88a0b2857d29a8447f012101df6fe1
    selector:
      matchLabels:
        os: linux
        arch: arm64
  - bin: kubelogin
    uri: https://github.com/int128/kubelogin/releases/download/v1.34.1/kubelogin_linux_arm.zip
    sha256: ec56dc5f3dcb6aefdaa1534353964d5bcb07b513eeb97e7369c887f4f63155ea
    selector:
      matchLabels:
        os: linux
        arch: arm
  - bin: kubelogin
    uri: https://github.com/int128/kubelogin/releases/download/v1.34.1/kubelogin_darwin_amd64.zip
    sha256: ab30b3c7b84f5185e2c39ff4a7e7569fb227e9f8b88e2f49f5a35bb7ade6e201
    selector:
      matchLabels:
        os: darwin
        arch: amd64
  - bin: kubelogin
    uri: https://github.com/int128/kubelogin/releases/download/v1.34.1/kubelogin_darwin_arm64.zip
    sha256: 154629cb4353255f17b606237b7bca62593ff180dfc6d9a717d1ce20cf531f06
    selector:
      matchLabels:
        os: darwin
        arch: arm64
  - bin: kubelogin.exe
    uri: https://github.com/int128/kubelogin/releases/download/v1.34.1/kubelogin_windows_amd64.zip
    sha256: d4ab502ded132b9dca6077adea06fd2b80015dbff7113d32fa557564783ee7ab
    selector:
      matchLabels:
        os: windows
        arch: amd64
  - bin: kubelogin.exe
    uri: https://github.com/int128/kubelogin/releases/download/v1.34.1/kubelogin_windows_arm64.zip
    sha256: ed64a74b273f08d654f0d617f71a7eafc760ea3ae303df2b0b0f87b93b2204e4
    selector:
      matchLabels:
        os: windows
        arch: arm64