apiVersion: krew.googlecontainertools.github.com/v1alpha2
kind: Plugin
metadata:
  name: oidc-login
spec:
  homepage: https://github.com/int128/kubelogin
  shortDescription: Log in to the OpenID Connect provider
  description: |
    This is a kubectl plugin for Kubernetes OpenID Connect (OIDC) authentication.

    ## Credential plugin mode
    kubectl executes oidc-login before calling the Kubernetes APIs.
    oidc-login automatically opens the browser and you can log in to the provider.
    After authentication, kubectl gets the token from oidc-login and you can access the cluster.
    See https://github.com/int128/kubelogin#credential-plugin-mode for more.

    ## Standalone mode
    Run `kubectl oidc-login`.
    It automatically opens the browser and you can log in to the provider.
    After authentication, it writes the token to the kubeconfig and you can access the cluster.
    See https://github.com/int128/kubelogin#standalone-mode for more.

  caveats: |
    You need to setup the OIDC provider, Kubernetes API server, role binding and kubeconfig.
  version: v1.36.0
  platforms:
  - bin: kubelogin
    uri: https://github.com/int128/kubelogin/releases/download/v1.36.0/kubelogin_linux_amd64.zip
    sha256: a344f42be911dd681da8956234e37d8dd4edc48fd332d86c9de8d59d095d0eca
    selector:
      matchLabels:
        os: linux
        arch: amd64
  - bin: kubelogin
    uri: https://github.com/int128/kubelogin/releases/download/v1.36.0/kubelogin_linux_arm64.zip
    sha256: a0cb7ab0e67e5cc4acdcc4db31bd2e93f7f6831a3bd5da6143e3174c610852df
    selector:
      matchLabels:
        os: linux
        arch: arm64
  - bin: kubelogin
    uri: https://github.com/int128/kubelogin/releases/download/v1.36.0/kubelogin_linux_arm.zip
    sha256: 9f3bf029796fb3e03b84c88f516f674d03e96f29fc8b73aaccc6dc18678ab1b2
    selector:
      matchLabels:
        os: linux
        arch: arm
  - bin: kubelogin
    uri: https://github.com/int128/kubelogin/releases/download/v1.36.0/kubelogin_darwin_amd64.zip
    sha256: 2dcb68f51c4efa91e09cf39ed31f34a6661fdb925357235f726994a718839bd3
    selector:
      matchLabels:
        os: darwin
        arch: amd64
  - bin: kubelogin
    uri: https://github.com/int128/kubelogin/releases/download/v1.36.0/kubelogin_darwin_arm64.zip
    sha256: f6adb51309c04b1cc759c70f3f8d480d91843afefab0ed72ecf0172ea16416ff
    selector:
      matchLabels:
        os: darwin
        arch: arm64
  - bin: kubelogin.exe
    uri: https://github.com/int128/kubelogin/releases/download/v1.36.0/kubelogin_windows_amd64.zip
    sha256: 05523391f589b117d9d4f74302db4643d77fb0fddc07541968ec339f5538986f
    selector:
      matchLabels:
        os: windows
        arch: amd64
  - bin: kubelogin.exe
    uri: https://github.com/int128/kubelogin/releases/download/v1.36.0/kubelogin_windows_arm64.zip
    sha256: 31603977ed7b50204cbca2a90f72b646c1420ca1a24ff38c65c4ab20273a410c
    selector:
      matchLabels:
        os: windows
        arch: arm64