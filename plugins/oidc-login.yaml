apiVersion: krew.googlecontainertools.github.com/v1alpha2
kind: Plugin
metadata:
  name: oidc-login
spec:
  homepage: https://github.com/int128/kubelogin
  shortDescription: Log in to the OpenID Connect provider
  description: |
    This is a kubectl plugin for Kubernetes OpenID Connect (OIDC) authentication.

    ## Credential plugin mode
    kubectl executes oidc-login before calling the Kubernetes APIs.
    oidc-login automatically opens the browser and you can log in to the provider.
    After authentication, kubectl gets the token from oidc-login and you can access the cluster.
    See https://github.com/int128/kubelogin#credential-plugin-mode for more.

    ## Standalone mode
    Run `kubectl oidc-login`.
    It automatically opens the browser and you can log in to the provider.
    After authentication, it writes the token to the kubeconfig and you can access the cluster.
    See https://github.com/int128/kubelogin#standalone-mode for more.

  caveats: |
    You need to setup the OIDC provider, Kubernetes API server, role binding and kubeconfig.
  version: v1.34.2
  platforms:
  - bin: kubelogin
    uri: https://github.com/int128/kubelogin/releases/download/v1.34.2/kubelogin_linux_amd64.zip
    sha256: 5745dafe9f8dea3541c75b4a3da5e2d4778befa4c19f7c7b266e29d59b3deeb0
    selector:
      matchLabels:
        os: linux
        arch: amd64
  - bin: kubelogin
    uri: https://github.com/int128/kubelogin/releases/download/v1.34.2/kubelogin_linux_arm64.zip
    sha256: 67b7762362acbc7811cbca4921bf00b96b26f2a6cc3c8eafb82437d9d23e7d72
    selector:
      matchLabels:
        os: linux
        arch: arm64
  - bin: kubelogin
    uri: https://github.com/int128/kubelogin/releases/download/v1.34.2/kubelogin_linux_arm.zip
    sha256: 4ff95e6f5326a786432cfed580de11eb7bb9651391bfc488a14df934ab864ce2
    selector:
      matchLabels:
        os: linux
        arch: arm
  - bin: kubelogin
    uri: https://github.com/int128/kubelogin/releases/download/v1.34.2/kubelogin_darwin_amd64.zip
    sha256: 21b1e31d3b58642cca19249d56e93aeef0f5d8ae23e0d8ba7d63e075034039f2
    selector:
      matchLabels:
        os: darwin
        arch: amd64
  - bin: kubelogin
    uri: https://github.com/int128/kubelogin/releases/download/v1.34.2/kubelogin_darwin_arm64.zip
    sha256: b5f68424af0704b41cbd441ec0dd4a8a655e7f64162e755c746b79477b0f253e
    selector:
      matchLabels:
        os: darwin
        arch: arm64
  - bin: kubelogin.exe
    uri: https://github.com/int128/kubelogin/releases/download/v1.34.2/kubelogin_windows_amd64.zip
    sha256: 6f150a66bd5231899dcd0e8325da1d8c7cdb061316f501f692aa11bc63ba1c9a
    selector:
      matchLabels:
        os: windows
        arch: amd64
  - bin: kubelogin.exe
    uri: https://github.com/int128/kubelogin/releases/download/v1.34.2/kubelogin_windows_arm64.zip
    sha256: 874c9d10294e8e13b27d4dd934bf933d7696f0b0a2eecc5b42e63352a33a4a3e
    selector:
      matchLabels:
        os: windows
        arch: arm64