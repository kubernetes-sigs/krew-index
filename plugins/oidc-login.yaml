apiVersion: krew.googlecontainertools.github.com/v1alpha2
kind: Plugin
metadata:
  name: oidc-login
spec:
  homepage: https://github.com/int128/kubelogin
  shortDescription: Log in to the OpenID Connect provider
  description: |
    This is a kubectl plugin for Kubernetes OpenID Connect (OIDC) authentication.

    ## Credential plugin mode
    kubectl executes oidc-login before calling the Kubernetes APIs.
    oidc-login automatically opens the browser and you can log in to the provider.
    After authentication, kubectl gets the token from oidc-login and you can access the cluster.
    See https://github.com/int128/kubelogin#credential-plugin-mode for more.

    ## Standalone mode
    Run `kubectl oidc-login`.
    It automatically opens the browser and you can log in to the provider.
    After authentication, it writes the token to the kubeconfig and you can access the cluster.
    See https://github.com/int128/kubelogin#standalone-mode for more.

  caveats: |
    You need to setup the OIDC provider, Kubernetes API server, role binding and kubeconfig.
  version: v1.35.2
  platforms:
  - bin: kubelogin
    uri: https://github.com/int128/kubelogin/releases/download/v1.35.2/kubelogin_linux_amd64.zip
    sha256: 40ccbc12a9d47ad6416ac111cbc895ed01d3cf2cad33454f1d3a035d6c21135a
    selector:
      matchLabels:
        os: linux
        arch: amd64
  - bin: kubelogin
    uri: https://github.com/int128/kubelogin/releases/download/v1.35.2/kubelogin_linux_arm64.zip
    sha256: 0410dde72f2c3dc83c05ca9325d41e104831d68a083ecb4e81f785ce967653f6
    selector:
      matchLabels:
        os: linux
        arch: arm64
  - bin: kubelogin
    uri: https://github.com/int128/kubelogin/releases/download/v1.35.2/kubelogin_linux_arm.zip
    sha256: 5c289982b3e6bdf334ec4e6b9e0d1b74690c9000c5dbd07abacd170b36b63346
    selector:
      matchLabels:
        os: linux
        arch: arm
  - bin: kubelogin
    uri: https://github.com/int128/kubelogin/releases/download/v1.35.2/kubelogin_darwin_amd64.zip
    sha256: b342e08b9eab45a650907c2587e418569f715ed3ba47a67dc0a73ab8f180423e
    selector:
      matchLabels:
        os: darwin
        arch: amd64
  - bin: kubelogin
    uri: https://github.com/int128/kubelogin/releases/download/v1.35.2/kubelogin_darwin_arm64.zip
    sha256: f6405fe2954d305e98adb99468c25e96795c45e1abb2b2da90b67017366c1dbe
    selector:
      matchLabels:
        os: darwin
        arch: arm64
  - bin: kubelogin.exe
    uri: https://github.com/int128/kubelogin/releases/download/v1.35.2/kubelogin_windows_amd64.zip
    sha256: 0a3aa6c5cca12645ece945508c79c3589446152654422b1495d06ca72b038893
    selector:
      matchLabels:
        os: windows
        arch: amd64
  - bin: kubelogin.exe
    uri: https://github.com/int128/kubelogin/releases/download/v1.35.2/kubelogin_windows_arm64.zip
    sha256: 2789ac023c20aa55951a169e9f2e5527e419945f806d9a4b09775bfa7e98a245
    selector:
      matchLabels:
        os: windows
        arch: arm64