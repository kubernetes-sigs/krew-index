apiVersion: krew.googlecontainertools.github.com/v1alpha2
kind: Plugin
metadata:
  name: oidc-login
spec:
  homepage: https://github.com/int128/kubelogin
  shortDescription: Log in to the OpenID Connect provider
  description: |
    This is a kubectl plugin for Kubernetes OpenID Connect (OIDC) authentication.

    ## Credential plugin mode
    kubectl executes oidc-login before calling the Kubernetes APIs.
    oidc-login automatically opens the browser and you can log in to the provider.
    After authentication, kubectl gets the token from oidc-login and you can access the cluster.
    See https://github.com/int128/kubelogin#credential-plugin-mode for more.

    ## Standalone mode
    Run `kubectl oidc-login`.
    It automatically opens the browser and you can log in to the provider.
    After authentication, it writes the token to the kubeconfig and you can access the cluster.
    See https://github.com/int128/kubelogin#standalone-mode for more.

  caveats: |
    You need to setup the OIDC provider, Kubernetes API server, role binding and kubeconfig.
  version: v1.35.0
  platforms:
  - bin: kubelogin
    uri: https://github.com/int128/kubelogin/releases/download/v1.35.0/kubelogin_linux_amd64.zip
    sha256: 3397a9153e980178a83af72ae4646b8b9a1e9d61b30bbcac463881a148c81ccc
    selector:
      matchLabels:
        os: linux
        arch: amd64
  - bin: kubelogin
    uri: https://github.com/int128/kubelogin/releases/download/v1.35.0/kubelogin_linux_arm64.zip
    sha256: e4d4976ae991b7e25edd2f38aaec6dfa8e3f65d5e6eac7b87032dbb3e6dd01f8
    selector:
      matchLabels:
        os: linux
        arch: arm64
  - bin: kubelogin
    uri: https://github.com/int128/kubelogin/releases/download/v1.35.0/kubelogin_linux_arm.zip
    sha256: 47e8853c8b6738dd0e1e555c2caa1f3bd5dc686ca93391ebde49504ac0443f0f
    selector:
      matchLabels:
        os: linux
        arch: arm
  - bin: kubelogin
    uri: https://github.com/int128/kubelogin/releases/download/v1.35.0/kubelogin_darwin_amd64.zip
    sha256: 8237c7eb45b2fe752690903d10b9cddb505c655c5191421acb15652b90162860
    selector:
      matchLabels:
        os: darwin
        arch: amd64
  - bin: kubelogin
    uri: https://github.com/int128/kubelogin/releases/download/v1.35.0/kubelogin_darwin_arm64.zip
    sha256: 24216995b3ba2eee1302bce5e323cfc5029045940b031f0631c81c4404d67098
    selector:
      matchLabels:
        os: darwin
        arch: arm64
  - bin: kubelogin.exe
    uri: https://github.com/int128/kubelogin/releases/download/v1.35.0/kubelogin_windows_amd64.zip
    sha256: d1514d3dd58c871c567acad34d7cf07f45141384868a79f63e6f47a18f056b3e
    selector:
      matchLabels:
        os: windows
        arch: amd64
  - bin: kubelogin.exe
    uri: https://github.com/int128/kubelogin/releases/download/v1.35.0/kubelogin_windows_arm64.zip
    sha256: dd3488de93576b7a3c434838a0f527b1f0752222b71f422b021ab287b3ee15dd
    selector:
      matchLabels:
        os: windows
        arch: arm64