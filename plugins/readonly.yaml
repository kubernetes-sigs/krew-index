apiVersion: krew.googlecontainertools.github.com/v1alpha2
kind: Plugin
metadata:
  name: readonly
spec:
  version: v0.4.2
  homepage: https://github.com/Evaneos/kubectl-readonly
  shortDescription: Guardrail against accidental cluster changes
  description: |
    A kubectl wrapper that prevents accidental modifications. Allowed commands
    are passed through to kubectl in your PATH.

    Designed to guard against human errors and AI assistants overstepping their
    instructions. Also provides basic protection against leaking secret values
    to LLM context. Does NOT protect against deliberate bypass attempts.

    Examples:
    - Allowed: get pods, describe deploy, logs, top nodes
    - Blocked: delete pod, apply -f, exec, scale
    - Secrets: list allowed, but -o yaml/-o json blocked
  platforms:
  - selector:
      matchLabels:
        os: linux
        arch: amd64
    uri: https://github.com/Evaneos/kubectl-readonly/releases/download/v0.4.2/kubectl-readonly_0.4.2_linux_amd64.tar.gz
    sha256: 998fc0b8d5de46026942e362674ad451dd1dfef3fe3196126929f5dd26577b4a
    bin: kubectl-readonly
  - selector:
      matchLabels:
        os: linux
        arch: arm64
    uri: https://github.com/Evaneos/kubectl-readonly/releases/download/v0.4.2/kubectl-readonly_0.4.2_linux_arm64.tar.gz
    sha256: 0296429ddf3a444f8f1b7ae868dfdf23fab2f6252792914bb034fd952aa929c2
    bin: kubectl-readonly
  - selector:
      matchLabels:
        os: darwin
        arch: amd64
    uri: https://github.com/Evaneos/kubectl-readonly/releases/download/v0.4.2/kubectl-readonly_0.4.2_darwin_amd64.tar.gz
    sha256: 82334628f2cbe8eea185fd11c34c2fabd8c753a224e66f15f9699319bffceefe
    bin: kubectl-readonly
  - selector:
      matchLabels:
        os: darwin
        arch: arm64
    uri: https://github.com/Evaneos/kubectl-readonly/releases/download/v0.4.2/kubectl-readonly_0.4.2_darwin_arm64.tar.gz
    sha256: 1d330f35951799c8e81479585214f10c6e0562a5eaafe96e394961e60fcdec30
    bin: kubectl-readonly
  - selector:
      matchLabels:
        os: windows
        arch: amd64
    uri: https://github.com/Evaneos/kubectl-readonly/releases/download/v0.4.2/kubectl-readonly_0.4.2_windows_amd64.zip
    sha256: a370807a08102e34bc36718ead22c1038e4749f7cabfde3712224b636e4f5079
    bin: kubectl-readonly.exe
  - selector:
      matchLabels:
        os: windows
        arch: arm64
    uri: https://github.com/Evaneos/kubectl-readonly/releases/download/v0.4.2/kubectl-readonly_0.4.2_windows_arm64.zip
    sha256: 72c59f42d25dacffe4b8e728e673f7b9ace7f1e137fd2a672aeb28b8d5f8c167
    bin: kubectl-readonly.exe
