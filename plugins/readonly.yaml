apiVersion: krew.googlecontainertools.github.com/v1alpha2
kind: Plugin
metadata:
  name: readonly
spec:
  version: v0.5.0
  homepage: https://github.com/Evaneos/kubectl-readonly
  shortDescription: Guardrail against accidental cluster changes
  description: |
    A kubectl wrapper that prevents accidental modifications. Allowed commands
    are passed through to kubectl in your PATH.

    Designed to guard against human errors and AI assistants overstepping their
    instructions. Also provides basic protection against leaking secret values
    to LLM context. Does NOT protect against deliberate bypass attempts.

    Examples:
    - Allowed: get pods, describe deploy, logs, top nodes
    - Blocked: delete pod, apply -f, exec, scale
    - Secrets: list allowed, but -o yaml/-o json blocked
  platforms:
  - selector:
      matchLabels:
        os: linux
        arch: amd64
    uri: https://github.com/Evaneos/kubectl-readonly/releases/download/v0.5.0/kubectl-readonly_0.5.0_linux_amd64.tar.gz
    sha256: 7cc606e18a80ad12b899bdc9bd41840a1872abb04c1cd3ed0930c02d5377a12f
    bin: kubectl-readonly
  - selector:
      matchLabels:
        os: linux
        arch: arm64
    uri: https://github.com/Evaneos/kubectl-readonly/releases/download/v0.5.0/kubectl-readonly_0.5.0_linux_arm64.tar.gz
    sha256: 321b883e5bde9a9f9eaf3630aab7b41a46af9f67316993f4ecdc30d562540b05
    bin: kubectl-readonly
  - selector:
      matchLabels:
        os: darwin
        arch: amd64
    uri: https://github.com/Evaneos/kubectl-readonly/releases/download/v0.5.0/kubectl-readonly_0.5.0_darwin_amd64.tar.gz
    sha256: a3e2ce886247b7855d1cd2e7fdbe6629c34fcbb3c8689842754f098d8d2425ca
    bin: kubectl-readonly
  - selector:
      matchLabels:
        os: darwin
        arch: arm64
    uri: https://github.com/Evaneos/kubectl-readonly/releases/download/v0.5.0/kubectl-readonly_0.5.0_darwin_arm64.tar.gz
    sha256: 608ad0635c4888ad87880358fbb5aecd18d7cee4eddf3ce75260fed50c6e32fe
    bin: kubectl-readonly
  - selector:
      matchLabels:
        os: windows
        arch: amd64
    uri: https://github.com/Evaneos/kubectl-readonly/releases/download/v0.5.0/kubectl-readonly_0.5.0_windows_amd64.zip
    sha256: 9a5f5403051a6a35d25e572e5eeac917571bb440af4d4fb06dcc167ee911bed9
    bin: kubectl-readonly.exe
  - selector:
      matchLabels:
        os: windows
        arch: arm64
    uri: https://github.com/Evaneos/kubectl-readonly/releases/download/v0.5.0/kubectl-readonly_0.5.0_windows_arm64.zip
    sha256: a371ff449857a6a6f7f47274d896ae67da5de3dd3a6b554c7d911f0e7d9be7dd
    bin: kubectl-readonly.exe
