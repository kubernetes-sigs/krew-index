apiVersion: krew.googlecontainertools.github.com/v1alpha2
kind: Plugin
metadata:
  name: readonly
spec:
  version: v0.4.0
  homepage: https://github.com/Evaneos/kubectl-readonly
  shortDescription: Guardrail against accidental cluster changes
  description: |
    A kubectl wrapper that prevents accidental modifications. Allowed commands
    are passed through to kubectl in your PATH.

    Designed to guard against human errors and AI assistants overstepping their
    instructions. Also provides basic protection against leaking secret values
    to LLM context. Does NOT protect against deliberate bypass attempts.

    Examples:
    - Allowed: get pods, describe deploy, logs, top nodes
    - Blocked: delete pod, apply -f, exec, scale
    - Secrets: list allowed, but -o yaml/-o json blocked
  platforms:
  - selector:
      matchLabels:
        os: linux
        arch: amd64
    uri: https://github.com/Evaneos/kubectl-readonly/releases/download/v0.4.0/kubectl-readonly_0.4.0_linux_amd64.tar.gz
    sha256: 864320564b4ef0da96c5013bee80503ad55ce15cdc5c7a8fb5eac4a0a698cdd4
    bin: kubectl-readonly
  - selector:
      matchLabels:
        os: linux
        arch: arm64
    uri: https://github.com/Evaneos/kubectl-readonly/releases/download/v0.4.0/kubectl-readonly_0.4.0_linux_arm64.tar.gz
    sha256: 7999eaa9f7b306fbf80529c1396e4216999fe81eb4bcbe2f0d8656f4004ebf76
    bin: kubectl-readonly
  - selector:
      matchLabels:
        os: darwin
        arch: amd64
    uri: https://github.com/Evaneos/kubectl-readonly/releases/download/v0.4.0/kubectl-readonly_0.4.0_darwin_amd64.tar.gz
    sha256: 66ee737ffb179874888ca478e0b39e306a6aa3c3550db91c2e55fb347a8c7479
    bin: kubectl-readonly
  - selector:
      matchLabels:
        os: darwin
        arch: arm64
    uri: https://github.com/Evaneos/kubectl-readonly/releases/download/v0.4.0/kubectl-readonly_0.4.0_darwin_arm64.tar.gz
    sha256: f338ff1c7e68a8a203b09ae92800c1ab775fb35fbf9a51f257f34760ba2fdab7
    bin: kubectl-readonly
  - selector:
      matchLabels:
        os: windows
        arch: amd64
    uri: https://github.com/Evaneos/kubectl-readonly/releases/download/v0.4.0/kubectl-readonly_0.4.0_windows_amd64.zip
    sha256: 4a91ad7195f55587c834046abb1960393694114e5618c99ffa076af57efc2339
    bin: kubectl-readonly.exe
  - selector:
      matchLabels:
        os: windows
        arch: arm64
    uri: https://github.com/Evaneos/kubectl-readonly/releases/download/v0.4.0/kubectl-readonly_0.4.0_windows_arm64.zip
    sha256: 8c633b46af60fd1d8462a3571e98b75c9e2049f8971d1c5cd445ad4c3135c661
    bin: kubectl-readonly.exe
