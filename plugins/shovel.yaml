apiVersion: krew.googlecontainertools.github.com/v1alpha2
kind: Plugin
metadata:
  name: shovel
spec:
  homepage: https://github.com/dodopizza/kubectl-shovel
  shortDescription: Gather diagnostics for .NET Core applications
  version: v0.9.1
  description: |
    Plugin for gathering diagnostics from running in Kubernetes .NET Core
    applications. It runs the job on the specified pod's node with a mount
    to its /tmp folder with application's diagnostic socket and runs specified
    tool against it. Supported tools are: dotnet-gcdump and dotnet-trace
  caveats: |
    It can work with .NET Core 3.0+ applications and Kubernetes clusters with
    docker or containerd runtime. Permissions to get pods and create jobs are
    required. Also it requires allowance to mount /var/lib/docker path for
    docker runtime and /run/containerd for containerd from a host in read-only
    mode
  platforms:
    - uri: https://github.com/dodopizza/kubectl-shovel/releases/download/v0.9.1/kubectl-shovel_Darwin_x86_64.tar.gz
      sha256: a55bc57f6e46279b9d95157cac4ea28db135689a3fb76dfc97c7155845d27a37
      bin: kubectl-shovel
      files:
        - from: kubectl-shovel
          to: .
        - from: LICENSE
          to: .
      selector:
        matchLabels:
          os: darwin
          arch: amd64
    - uri: https://github.com/dodopizza/kubectl-shovel/releases/download/v0.9.1/kubectl-shovel_Darwin_arm64.tar.gz
      sha256: 0ca0b5f0cf57636a611c467fc31b4de5bd0dde8499095d561090457414bcd9f7
      bin: kubectl-shovel
      files:
        - from: kubectl-shovel
          to: .
        - from: LICENSE
          to: .
      selector:
        matchLabels:
          os: darwin
          arch: arm64
    - uri: https://github.com/dodopizza/kubectl-shovel/releases/download/v0.9.1/kubectl-shovel_Linux_x86_64.tar.gz
      sha256: 5d2386e7a3fe7e71fd82b58fca629a61eaee14701bad1290264b6691c362e2aa
      bin: kubectl-shovel
      files:
        - from: kubectl-shovel
          to: .
        - from: LICENSE
          to: .
      selector:
        matchLabels:
          os: linux
          arch: amd64
    - uri: https://github.com/dodopizza/kubectl-shovel/releases/download/v0.9.1/kubectl-shovel_Linux_arm64.tar.gz
      sha256: d5daa8d0658ead8db84028559dcaf185b7b99344e3bb3e7cf677c3c98fb337c2
      bin: kubectl-shovel
      files:
        - from: kubectl-shovel
          to: .
        - from: LICENSE
          to: .
      selector:
        matchLabels:
          os: linux
          arch: arm64
    - uri: https://github.com/dodopizza/kubectl-shovel/releases/download/v0.9.1/kubectl-shovel_Windows_x86_64.zip
      sha256: f5c1df26cb25965b39dd846e0f9b923041f9a8b9bc91a4be93e219824d36d67c
      bin: kubectl-shovel.exe
      files:
        - from: kubectl-shovel.exe
          to: .
        - from: LICENSE
          to: .
      selector:
        matchLabels:
          os: windows
          arch: amd64
