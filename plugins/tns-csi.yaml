apiVersion: krew.googlecontainertools.github.com/v1alpha2
kind: Plugin
metadata:
  name: tns-csi
spec:
  version: v0.4.8
  homepage: https://github.com/fenio/tns-csi
  shortDescription: Manage TrueNAS CSI volumes
  description: |
    kubectl plugin for managing TrueNAS CSI driver volumes.

    Commands:
    - list: List all managed volumes with clone relationships
    - list-snapshots: List snapshots with source volumes
    - list-orphaned: Find volumes without matching PVCs
    - describe: Show detailed volume information
    - health: Check health of all volumes
    - troubleshoot: Diagnose PVC issues
    - summary: Dashboard overview of all resources
    - cleanup: Delete orphaned volumes safely
    - mark-adoptable: Mark volumes for DR/adoption
    - adopt: Generate PV manifest for adoption
    - status: Show volume status from TrueNAS
    - connectivity: Test TrueNAS connection
  platforms:
  - selector:
      matchLabels:
        os: linux
        arch: amd64
    uri: https://github.com/fenio/tns-csi/releases/download/plugin-v0.4.8/kubectl-tns_csi-linux-amd64.tar.gz
    sha256: 12859af21517036c160eb1c3ac24841f4d56c4b9ac3d516beb154fc04644391c
    bin: kubectl-tns_csi
  - selector:
      matchLabels:
        os: linux
        arch: arm64
    uri: https://github.com/fenio/tns-csi/releases/download/plugin-v0.4.8/kubectl-tns_csi-linux-arm64.tar.gz
    sha256: 752f8c7ba98ee0df47a77253c07eda534b31dddfadfc10a95bad038f08fe0830
    bin: kubectl-tns_csi
  - selector:
      matchLabels:
        os: darwin
        arch: amd64
    uri: https://github.com/fenio/tns-csi/releases/download/plugin-v0.4.8/kubectl-tns_csi-darwin-amd64.tar.gz
    sha256: 77beba182cf773c4ec40e81c7faa8ce8b6eb54b278a4bfb78f1e2bbac4d00f3c
    bin: kubectl-tns_csi
  - selector:
      matchLabels:
        os: darwin
        arch: arm64
    uri: https://github.com/fenio/tns-csi/releases/download/plugin-v0.4.8/kubectl-tns_csi-darwin-arm64.tar.gz
    sha256: 381d5fce61a946334c00ef844e1c0950d0d1f01ef188192e4f808e5d096c1dbb
    bin: kubectl-tns_csi
  - selector:
      matchLabels:
        os: windows
        arch: amd64
    uri: https://github.com/fenio/tns-csi/releases/download/plugin-v0.4.8/kubectl-tns_csi-windows-amd64.zip
    sha256: d5c821975448dc29596f59ba26ce78fe1f817c0159f7c04a49cc8f55fe46170a
    bin: kubectl-tns_csi.exe
