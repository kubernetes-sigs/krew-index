apiVersion: krew.googlecontainertools.github.com/v1alpha2
kind: Plugin
metadata:
  name: tns-csi
spec:
  version: v0.3.0
  homepage: https://github.com/fenio/tns-csi
  shortDescription: Manage TrueNAS CSI volumes
  description: |
    kubectl plugin for managing TrueNAS CSI driver volumes.

    Commands:
    - list: List all managed volumes with clone relationships
    - list-snapshots: List snapshots with source volumes
    - list-orphaned: Find volumes without matching PVCs
    - describe: Show detailed volume information
    - health: Check health of all volumes
    - troubleshoot: Diagnose PVC issues
    - summary: Dashboard overview of all resources
    - cleanup: Delete orphaned volumes safely
    - mark-adoptable: Mark volumes for DR/adoption
    - adopt: Generate PV manifest for adoption
    - status: Show volume status from TrueNAS
    - connectivity: Test TrueNAS connection
  platforms:
  - selector:
      matchLabels:
        os: linux
        arch: amd64
    uri: https://github.com/fenio/tns-csi/releases/download/plugin-v0.3.0/kubectl-tns_csi-linux-amd64.tar.gz
    sha256: 94a67f2f813d531eea9631035b74d0351e8ae8982e38453f950c669dd4181884
    bin: kubectl-tns_csi
  - selector:
      matchLabels:
        os: linux
        arch: arm64
    uri: https://github.com/fenio/tns-csi/releases/download/plugin-v0.3.0/kubectl-tns_csi-linux-arm64.tar.gz
    sha256: f91ee39981e67f855cf8a063cc13d6d85a73d041adb39de05d01b187576869ae
    bin: kubectl-tns_csi
  - selector:
      matchLabels:
        os: darwin
        arch: amd64
    uri: https://github.com/fenio/tns-csi/releases/download/plugin-v0.3.0/kubectl-tns_csi-darwin-amd64.tar.gz
    sha256: 7184416977bd23d250fbe8adc4cb8b3860378e264ddcaf24646608fa58eb8542
    bin: kubectl-tns_csi
  - selector:
      matchLabels:
        os: darwin
        arch: arm64
    uri: https://github.com/fenio/tns-csi/releases/download/plugin-v0.3.0/kubectl-tns_csi-darwin-arm64.tar.gz
    sha256: 2c02376e8d824a01d64e825138356ddd5af281a1242cb5775541158d22a76cc7
    bin: kubectl-tns_csi
  - selector:
      matchLabels:
        os: windows
        arch: amd64
    uri: https://github.com/fenio/tns-csi/releases/download/plugin-v0.3.0/kubectl-tns_csi-windows-amd64.zip
    sha256: 40c0d5a96a0cfbbc6e65e6aa9a2f6664980a6bdf29ae273c026f233929940fff
    bin: kubectl-tns_csi.exe
