apiVersion: krew.googlecontainertools.github.com/v1alpha2
kind: Plugin
metadata:
  name: tns-csi
spec:
  version: v0.4.5
  homepage: https://github.com/fenio/tns-csi
  shortDescription: Manage TrueNAS CSI volumes
  description: |
    kubectl plugin for managing TrueNAS CSI driver volumes.

    Commands:
    - list: List all managed volumes with clone relationships
    - list-snapshots: List snapshots with source volumes
    - list-orphaned: Find volumes without matching PVCs
    - describe: Show detailed volume information
    - health: Check health of all volumes
    - troubleshoot: Diagnose PVC issues
    - summary: Dashboard overview of all resources
    - cleanup: Delete orphaned volumes safely
    - mark-adoptable: Mark volumes for DR/adoption
    - adopt: Generate PV manifest for adoption
    - status: Show volume status from TrueNAS
    - connectivity: Test TrueNAS connection
  platforms:
  - selector:
      matchLabels:
        os: linux
        arch: amd64
    uri: https://github.com/fenio/tns-csi/releases/download/plugin-v0.4.5/kubectl-tns_csi-linux-amd64.tar.gz
    sha256: 4f127fdb7d91eac17215fc59f0f37ebb3b5aab83f94159e23b5b788e4279411f
    bin: kubectl-tns_csi
  - selector:
      matchLabels:
        os: linux
        arch: arm64
    uri: https://github.com/fenio/tns-csi/releases/download/plugin-v0.4.5/kubectl-tns_csi-linux-arm64.tar.gz
    sha256: 822fecdc80b6cdf3a5bfb7a61509512f7235a30e4d3af2f23d7fc5c3ca77d6ac
    bin: kubectl-tns_csi
  - selector:
      matchLabels:
        os: darwin
        arch: amd64
    uri: https://github.com/fenio/tns-csi/releases/download/plugin-v0.4.5/kubectl-tns_csi-darwin-amd64.tar.gz
    sha256: 207fd034e6384ebb73f8262b791460b8666da48d61eac62cf84f2992fc32d806
    bin: kubectl-tns_csi
  - selector:
      matchLabels:
        os: darwin
        arch: arm64
    uri: https://github.com/fenio/tns-csi/releases/download/plugin-v0.4.5/kubectl-tns_csi-darwin-arm64.tar.gz
    sha256: af174f28286a54295ebe151e16d55b09e7f2141642cac9787192c51297965fd7
    bin: kubectl-tns_csi
  - selector:
      matchLabels:
        os: windows
        arch: amd64
    uri: https://github.com/fenio/tns-csi/releases/download/plugin-v0.4.5/kubectl-tns_csi-windows-amd64.zip
    sha256: 89feb97d99b35a1036366ea6da207e56c90bfa3cfe8c576e575d9104dc9431e1
    bin: kubectl-tns_csi.exe
